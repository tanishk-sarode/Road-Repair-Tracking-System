{% extends 'mayor/base.html' %}

{% block content %}
<div>
  <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
    <h1 class="h2 mb-0">Dashboard</h1>
    <div class="btn-toolbar">
      <div class="btn-group me-2">
        <button id="btn-week" type="button" class="btn btn-sm btn-outline-primary active">This Week</button>
        <button id="btn-month" type="button" class="btn btn-sm btn-outline-primary">This Month</button>
        <button id="btn-year" type="button" class="btn btn-sm btn-outline-primary">This Year</button>
      </div>
    </div>
  </div>
    
  </div>
  <div class="row mb-4">
      <div class="col-md-3">
        <div class="card border-left-primary shadow h-100 py-2">
          <div class="card-body">
            <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">Total Complaints</div>
            <div class="h5 mb-0 font-weight-bold text-gray-800">{{ total_complaints }}</div>
          </div>
        </div>
      </div>
      <div class="col-md-3">
        <div class="card border-left-success shadow h-100 py-2">
          <div class="card-body">
            <div class="text-xs font-weight-bold text-success text-uppercase mb-1">Completed Repairs</div>
            <div class="h5 mb-0 font-weight-bold text-gray-800">{{ completed_repairs }}</div>
          </div>
        </div>
      </div>
      <div class="col-md-3">
        <div class="card border-left-warning shadow h-100 py-2">
          <div class="card-body">
            <div class="text-xs font-weight-bold text-warning text-uppercase mb-1">Ongoing Repairs</div>
            <div class="h5 mb-0 font-weight-bold text-gray-800">{{ ongoing_repairs }}</div>
          </div>
        </div>
      </div>
      <div class="col-md-3">
        <div class="card border-left-info shadow h-100 py-2">
          <div class="card-body">
            <div class="text-xs font-weight-bold text-info text-uppercase mb-1">Scheduled Repairs</div>
            <div class="h5 mb-0 font-weight-bold text-gray-800">{{ scheduled_repairs }}</div>
          </div>
        </div>
      </div>
    </div>
    

  <canvas class="my-4 w-100" id="myChart" width="1594" height="673" style="display: block; box-sizing: border-box; height: 336px; width: 797px;"></canvas>

  <h2>All Repairs</h2>
  <div class="table-responsive small">
    <table class="table table-striped table-sm">
      <thead>
          <tr>
              <th>ID</th>
              <th>Location</th>
              <th>Status</th>
              <th>Description</th>
              <th>Start Date</th>
              <th>End Date</th>
            </tr>
      </thead>
      <tbody>
          {% for repair_detail in repair_details %}
          <tr>
            <td>{{ repair_detail.id }}</td>
            <td>{{ repair_detail.location }}</td>
            <td>{{ repair_detail.status }}</td>
            <td>{{ repair_detail.description or 'â€”' }}</td>
            <td>{{ repair_detail.start_date}}</td>
            <td>{{ repair_detail.completion_date}}</td>
          </tr>
          {% endfor %}
        </tbody>
    </table>
  </div>
</div>
{% endblock %}